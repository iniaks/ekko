<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="../src/ekko.js"></script>
	<script type="text/javascript">

	window.onload = function() {

		var user = {
			name : 'tom',
			school : ['JinHua No.13 Middle School','JinHua No.1 High School','ZheJiang University']
		}

		var sequence = [
			{
				name    : "Tom",
				gender  : 'male',
				profile : {
					school   : ['Harvard','Cambridge']
				}
			},
			{
				name    : "Jerry",
				gender  : 'female',
				profile : {
					school   : ['Cansas','Washington','California']
				}
			},
			{
				name    : "Lily",
				gender  : 'female',
				profile : {
					school   : ['Duke','Norton','Oxford']
				}
			}
		];

		var EXP_TRIM     = /(^\s+)|(\s+$)/g;
		//去除换行
		var EXP_ENTER    = /[\r\n\t]/g;


		var dom = document.getElementById('renderPlace');
		var tmp = document.getElementById('test');
//
		var EXP_CATEGORY = /(.+?)(~if|@for)(.*)?(~|@)/;

		//console.log(EXP_CATEGORY.exec(tmp.innerHTML.replace(EXP_TRIM,'').replace(EXP_ENTER, '')));

//		var html = tmp.innerHTML.replace(EXP_TRIM,'').replace(EXP_ENTER, '').replace(EXP_CATEGORY, function(x,y,z,t) {
//
//			console.log(z)
//
//			return x.replace('hello', 'yes!')
//		})

		//dom.innerHTML = html;
		// console.log(tmp)
		ekko.render(dom, tmp, sequence);
	}
	
	</script>
</head>
<body>
	<div id="renderPlace"></div>
	<script type="text/html" id="test">
		<h2>hello this is my personal javascript template engine</h2>

		@for ( item in sequence )
			<p>{{ item.name }} went
				@for ( school in item.profile.school )
				<span>{{ school }}</span>
				@
			</p>
		@

		<footer>bottom</footer>
	</script>
</body>
</html>